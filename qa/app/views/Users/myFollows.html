#{extends 'profileMain.html' /}
#{set title:'My follows' /}


<div class="questions"> 
<p>following this questions:
	#{list items:followQ, as:'question'}
            <div class="question">
                <div class="follows-metadata">
                    <div class="follows-content">
        				<a href="@{Application.show(question.id)}">${question.content.raw()}</a>
        				<p>
        				#{form @Users.unfollowQuestion(question.id)}
							<input type="submit" value="Unfollow"/>
						#{/form}
        				<p> 
        				#{list items: question.lastChanges(question.id, userId), as:'newpost'}
        					<a href="@{Application.show(newpost.id)}">${newpost.content.raw()}</a>
        				#{/list}
        			</div>
                 </div>
            </div>
            <br>
	#{/list}
</div>

<p>

<div class="form"> 
<p>following this users:
	#{list items:followU, as:'user'}
            <div class="question">
                <div class="follows-metadata">
                    <div class="follows-content">
        				<a href="@{Users.showProfile(user.id)}">${user.fullname}</a>
        				<p>
        				
        				#{form @Users.unfollowUser(user.id)}
							<input type="submit" value="Unfollow"/>
						#{/form}
        			</div>
                 </div>
            </div>
            <br>
	#{/list}
	
	        			        <h2>Activities</h2>
								#{list items:activities, as:'activity'}
									<div class="activity">
										#{if activity.checkInstance()}
											${activity.timestamp}, ${activity.author.fullname} wrote a new <a href = "@{Application.show(activity.id)}">question</a>.
										#{/if}
										#{else}
											 ${activity.timestamp}, ${activity.author.fullname} wrote a answer to the  <a href = "@{Application.show(activity.question.id)}"> question</a> from ${activity.question.author.fullname}
										#{/else}
									</div>
     							#{/list}
</div>